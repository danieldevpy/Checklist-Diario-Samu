{% extends 'base.html' %}
{% load static %}
{% block title %}
CheckList Finalizado
{%endblock%}
{% block unidade %}

    <div class="headerleft">
        <a href="{% url 'index' %}">
            <img src="{% static 'img/samulogo.png' %}">
            </a>
            <a href="{% url 'index' %}">
            <h2> Checklist Diário </h2>
            </a>
    </div>

    <div class="headeright">
        {% if user.usa and not user.is_staff%}
        <label>Logado na unidade de <b>{{user.unity}} (USA)</b></label>
        {% elif user.usb and not user.is_staff%}
        <label>Logado na unidade de <b>{{user.unity}} (USB)</b></label>
        {% else %}
        <label>Logado na unidade de <b>{{user.unity}}</b></label>
        {% endif %}
        <br>
        {% if user.is_staff %}
        <label><a href="/registros">Registros Mensal</a></label>
        <label><a href="/admin" target="_blank">Acesso Administrativo</a></label>
        {% endif %}
        <label><a href="{% url 'logout' %}">Sair</a></label>
    </div>

       
{%endblock%}

{% block conteudo%}
<div class="container">
    <div class="headerbottom">

    <h1>Checklist Finalizado!</h1>
    <label>{{ dataatual }}</label>
    <label id="textarea"></label>
    <div id="sugestao" style="display: none;">
        <div style="display: flex;">
            <textarea style="width: 100%;min-height: 30px;" placeholder="digite aqui para segerir..."></textarea>
            <button>Enviar</button>
        </div>
        <div>
            <a href="{% url 'index' %}"> <button class="btn">Voltar para o inicio</button></a>
        </div>

    </div>

    </div>
</div>
<script>
    window.onload = function() { 
    let text = "Parabéns, o checklist foi finalizado corretamente!\n\ Para ajudar a melhorar o sistema você pode sugerir alguma melhoria?";
    let _textarea = document.getElementById("textarea");

    const resolveAwait = ()=> {
        return new Promise(resolve => {
            setTimeout(() => {
            resolve('resolved');
            }, 25);
        });
}
    const sleepf = async()=>{
        let newT = "";
        for(let x=0; x < text.length; x++){
            newT = newT + text[x]
            _textarea.innerText = newT;
            const result = await resolveAwait();
        }
        document.getElementById("sugestao").style.display = "block";
    }
    sleepf();

     
    }
  </script>
{%endblock%}
